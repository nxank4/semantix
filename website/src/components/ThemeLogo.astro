---
// Theme-aware logo component for Starlight
import logoLight from '../assets/loclean-logo-for-light.svg';
import logoDark from '../assets/loclean-logo-for-dark.svg';
---

<picture>
	<source srcset={logoLight} media="(prefers-color-scheme: light)" />
	<source srcset={logoDark} media="(prefers-color-scheme: dark)" />
	<img src={logoLight} alt="Loclean logo" class="theme-logo" />
</picture>

<script>
	// Update logo based on theme toggle
	function updateLogo() {
		const theme = document.documentElement.getAttribute('data-theme') || 
			(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
		const img = document.querySelector('.theme-logo');
		if (img) {
			if (theme === 'dark') {
				img.src = new URL('../assets/loclean-logo-for-dark.svg', import.meta.url).href;
			} else {
				img.src = new URL('../assets/loclean-logo-for-light.svg', import.meta.url).href;
			}
		}
	}

	// Watch for theme changes
	const observer = new MutationObserver(updateLogo);
	observer.observe(document.documentElement, {
		attributes: true,
		attributeFilter: ['data-theme']
	});

	// Initial update
	updateLogo();
</script>

<style>
	.theme-logo {
		height: auto;
		width: auto;
		max-height: 2rem;
	}
</style>
